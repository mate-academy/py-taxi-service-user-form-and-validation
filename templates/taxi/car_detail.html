{% extends "base.html" %}

{% block content %}
  <h1>
    Model: {{ car.model }}
  </h1>
  <p><strong>Manufacturer:</strong> ({{ car.manufacturer.name }}, {{ car.manufacturer.country }})</p>
  <div class="ml-3">
    <h4>Drivers</h4>
    {% if user in car.drivers.all %}
      <div style="margin-top: -45px; margin-bottom: 50px;">
        <a href="{% url 'taxi:driver-delete' pk=car.id %}" class="btn btn-danger link-to-page">
          Delete me from this car</a>
      </div>
    {% else %}
      <div style="margin-top: -45px; margin-bottom: 50px;">
        <a href="{% url 'taxi:driver-create' pk=car.id %}" class="btn btn-success link-to-page">
          Assign me to this car</a>
      </div>
    {% endif %}
    <hr>

    {% for driver in car.drivers.all %}
      <p><strong>Username:</strong> {{ driver.username }} </p>
      <p><strong>Full name:</strong> {{ driver.first_name }} {{ driver.last_name }} </p>
      <p><strong>License number:</strong> {{ driver.license_number }} </p>
    {% if not forloop.last %}
    <hr>
    {% endif %}
    {% empty %}
      <p>No drivers!</p>
    {% endfor %}

</div>
  <a style="float: left" href="{% url 'taxi:car-update' pk=car.id %}" class="btn btn-secondary link-to-page">
      Update
  </a>
  <a style="float: left" href="{% url 'taxi:car-delete' pk=car.id %}" class="btn btn-danger link-to-page">
      Delete
  </a>
{% endblock %}
