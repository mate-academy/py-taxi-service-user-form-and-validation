{% extends "base.html" %}

{% block content %}
  <h1>Car: {{ car.model }}</h1>
  <form method="post" action="{% url 'taxi:assign-me' car.id %}">
    {% csrf_token %}
    {% if request.user in car.drivers.all %}
      <input class="btn btn-danger" style="float: right" type="submit" value="Delete me from this car">
    {% else %}
      <input class="btn btn-success" style="float: right" type="submit" value="Assign me to this car">
    {% endif %}
  </form>
  <p>
    <strong>Manufacturer:</strong> {{ car.manufacturer }}
  </p>

  <h2>Drivers:</h2>
  <table>
    <tr>
      <th>ID</th>
      <th>Username</th>
      <th>Email</th>
    </tr>
    {% for driver in car.drivers.all %}
    <tr>
      <td><a href="{% url 'taxi:driver-detail' driver.id %}">{{ driver.id }}</a></td>
      <td>{{ driver.username }}</td>
      <td>{{ driver.email }}</td>
    </tr>
    {% endfor %}
  </table>
  <a class="update-delete" style="float: left" href="{% url 'taxi:car-update' car.id %}">Update</a>
  <a class="update-delete" style="float: left" href="{% url 'taxi:car-delete' car.id %}">Delete</a>
{% endblock %}
