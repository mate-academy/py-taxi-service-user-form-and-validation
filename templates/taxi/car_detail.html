{% extends "base.html" %}

{% block content %}
    <h1>Model: {{ car }}</h1>
    <p>Manufacturer: ({{ car.manufacturer.name }}, {{ car.manufacturer.country }})</p>
    <h1>Drivers
        {% if request.user in car.drivers.all %}
            <a href="{% url 'taxi:car-update-driver' pk=car.id %}"
               class="btn btn-danger link-to-page">
                Delete me from this car
            </a>
        {% else %}
            <a href="{% url 'taxi:car-update-driver' pk=car.id %}"
               class="btn btn-secondary link-to-page"
               style="background: green">
                Assign me to this car
            </a>
        {% endif %}
    </h1>
    <hr>
    <div class="ml-3">
        {% if car.drivers %}
            {% for driver in car.drivers.all %}
                <ul>
                    <li><strong>User name:</strong> {{ driver.username }}</li>
                    <li><strong>Full name:</strong> {{ driver.first_name }} {{ driver.last_name }}</li>
                    <li><strong>License number:</strong> {{ driver.license_number }}</li>
                    <hr class="border-top">
                </ul>
            {% empty %}
                <p>No drivers!</p>
            {% endfor %}
        {% endif %}
    </div>
    <a href="{% url 'taxi:car-update' pk=car.id %}"
       class="btn btn-secondary">
        Update
    </a>
    <a href="{% url 'taxi:car-delete' pk=car.id %}" class="btn btn-danger">
        Delete
    </a>
    <a href="{% url 'taxi:car-list' %}" class="btn btn-primary link-to-page">
        Cancel
    </a>
{% endblock %}
